import{r as o,j as s,L}from"./index-r3Kwr9BP.js";import{s as S,C as E,T as A,E as y}from"./ErrorBoundary-DiCz26V8.js";import{u as k}from"./MarvelService-p2YZ3SFL.js";import"./ErrorMessage-BvCBkVS_.js";const w=T=>{const{process:a,setProcess:l,getAllComics:d,_baseComicOffset:u}=k(),[x,p]=o.useState([]),[c,r]=o.useState(!1),[i,g]=o.useState(u),[_,j]=o.useState(!1);o.useEffect(()=>{m(i,!0)},[]);const m=(e,n)=>{r(!n),d(e).then(h).then(()=>l("confirmed")).catch(t=>{throw t.message})},h=e=>{let n=!1;e.length<8&&(n=!0),p(t=>[...t,...e]),r(!1),g(t=>t+8),j(n)},f=e=>(e=e.map(({id:n,thumbnail:t,title:N,price:b},C)=>s.jsx(E,{classNames:"comics__item",timeout:400,children:s.jsx("li",{className:"comics__item",tabIndex:0,children:s.jsxs(L,{to:`${n}`,children:[s.jsx("img",{src:t,alt:"comic",className:"comics__item-img"}),s.jsx("div",{className:"comics__item-name",children:N}),s.jsx("div",{className:"comics__item-price",children:b})]})})},C)),s.jsx("ul",{className:"comics__grid",children:s.jsx(A,{component:null,children:e})})),v=o.useMemo(()=>S(a,()=>f(x),c),[a]);return s.jsxs("div",{className:"comics__list",children:[v,s.jsx("button",{className:"button button__main button__long",onClick:()=>m(i),disabled:c,style:{display:_?"none":"block"},children:s.jsx("div",{className:"inner",children:"load more"})})]})},I="/marvel-portal/assets/Avengers-B-LhCFDs.png",B="/marvel-portal/assets/Avengers_logo-qQtRsob-.png",R=()=>s.jsxs("div",{className:"app__banner",children:[s.jsx("img",{src:I,alt:"Avengers"}),s.jsxs("div",{className:"app__banner-text",children:["New comics every week!",s.jsx("br",{}),"Stay tuned!"]}),s.jsx("img",{src:B,alt:"Avengers logo"})]}),P=()=>s.jsxs(s.Fragment,{children:[s.jsx(R,{}),s.jsx(y,{children:s.jsx(w,{})})]});export{P as default};
