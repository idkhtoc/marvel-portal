import{r as n,j as e,g as D,L as F}from"./index-r3Kwr9BP.js";import{s as b}from"./setContent-Dne9tLvZ.js";import{u as N}from"./MarvelService-p2YZ3SFL.js";import{s as M,C as $,T as q,E as x}from"./ErrorBoundary-DiCz26V8.js";import"./ErrorMessage-BvCBkVS_.js";const U="/marvel-portal/assets/mjolnir-g182l4Wh.png",V=()=>{const[s,r]=n.useState(null),{process:a,setProcess:t,getCharacter:i,clearError:c}=N();n.useEffect(()=>{l()},[]);const l=()=>{c();const h=Math.floor(Math.random()*400+1011e3);i(h).then(r).then(()=>t("confirmed")).catch(_=>{throw _.message})};return e.jsxs("div",{className:"randomchar",children:[b(a,A,s),e.jsxs("div",{className:"randomchar__static",children:[e.jsxs("p",{className:"randomchar__title",children:["Random character for today!",e.jsx("br",{}),"Do you want to get to know him better?"]}),e.jsx("p",{className:"randomchar__title",children:"Or choose another one"}),e.jsx("button",{className:"button button__main",onClick:l,children:e.jsx("div",{className:"inner",children:"try it"})}),e.jsx("img",{src:U,alt:"mjolnir",className:"randomchar__decoration"})]})]})},A=({thumbnail:s,name:r,description:a,homepage:t,wiki:i})=>{const c=`randomchar__img ${s.includes("image_not_available")?"randomchar__img_un":null}`;return e.jsxs("div",{className:"randomchar__block",children:[e.jsx("img",{src:s,alt:"Random character",className:c}),e.jsxs("div",{className:"randomchar__info",children:[e.jsx("p",{className:"randomchar__name",children:r}),e.jsx("p",{className:"randomchar__descr",children:a}),e.jsxs("div",{className:"randomchar__btns",children:[e.jsx("a",{href:t,target:"_blank",rel:"noreferrer",className:"button button__main",children:e.jsx("div",{className:"inner",children:"homepage"})}),e.jsx("a",{href:i,target:"_blank",rel:"noreferrer",className:"button button__secondary",children:e.jsx("div",{className:"inner",children:"Wiki"})})]})]})]})};var y={exports:{}},B="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",G=B,H=G;function C(){}function T(){}T.resetWarningCache=C;var K=function(){function s(t,i,c,l,h,_){if(_!==H){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}s.isRequired=s;function r(){return s}var a={array:s,bigint:s,bool:s,func:s,number:s,object:s,string:s,symbol:s,any:s,arrayOf:r,element:s,elementType:s,instanceOf:r,node:s,objectOf:r,oneOf:r,oneOfType:r,shape:r,exact:r,checkPropTypes:T,resetWarningCache:C};return a.PropTypes=a,a};y.exports=K();var Y=y.exports;const S=D(Y),E=({charId:s})=>{const[r,a]=n.useState(null),{process:t,setProcess:i,getCharacter:c,clearError:l}=N();n.useEffect(()=>{h()},[s]);const h=()=>{s&&(l(),c(s).then(a).then(()=>i("confirmed")))};return e.jsx("div",{className:"char__info",children:b(t,z,r)})},z=({name:s,description:r,thumbnail:a,homepage:t,wiki:i,comics:c})=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"char__basics",children:[e.jsx("img",{className:a.includes("image_not_available")?"un":"",src:a,alt:s}),e.jsxs("div",{children:[e.jsx("div",{className:"char__info-name",children:s}),e.jsxs("div",{className:"char__btns",children:[e.jsx("a",{href:t,className:"button button__main",children:e.jsx("div",{className:"inner",children:"homepage"})}),e.jsx("a",{href:i,className:"button button__secondary",children:e.jsx("div",{className:"inner",children:"Wiki"})})]})]})]}),e.jsx("div",{className:"char__descr",children:r}),e.jsx("div",{className:"char__comics",children:"Comics:"}),e.jsxs("ul",{className:"char__comics-list",children:[c.length?null:"There are no comics for this character",c.map((l,h)=>e.jsx("li",{className:"char__comics-item",children:e.jsx(F,{to:`/comics/${l.resourceURI.match(/[^/]+$/)}`,children:l.name})},h))]})]});E.propTypes={charId:S.number};const R=s=>{const{process:r,setProcess:a,getAllCharacters:t,_baseOffset:i}=N(),[c,l]=n.useState([]),[h,_]=n.useState(!1),[u,k]=n.useState(i),[P,O]=n.useState(!1);n.useEffect(()=>{g(u,!0)},[]);const g=(o,m)=>{_(!m),t(o).then(w).then(()=>a("confirmed")).catch(d=>{throw d.message})},w=o=>{let m=!1;o.length<9&&(m=!0),l(d=>[...d,...o]),_(!1),k(d=>d+9),O(m)},p=n.useRef([]),v=o=>{p.current.forEach(m=>m.classList.remove("char__item_selected")),p.current[o].classList.add("char__item_selected"),p.current[o].focus()},L=o=>(o=o.map(({id:m,thumbnail:d,name:W},j)=>e.jsx($,{classNames:"char__item",timeout:400,children:e.jsxs("li",{tabIndex:0,ref:f=>p.current[j]=f,onClick:()=>{s.onCharSelected(m),v(j)},onKeyDown:f=>{(f.key===" "||f.key==="Enter")&&(s.onCharSelected(m),v(j))},className:"char__item",children:[e.jsx("img",{className:d.includes("image_not_available")?"un":"",src:d,alt:"character"}),e.jsx("div",{className:"char__name",children:W})]})},m)),e.jsx("ul",{className:"char__grid",children:e.jsx(q,{component:null,children:o})})),I=n.useMemo(()=>M(r,()=>L(c),h),[r]);return e.jsxs("div",{className:"char__list",children:[I,e.jsx("button",{className:"button button__main button__long",onClick:()=>g(u),disabled:h,style:{display:P?"none":"block"},children:e.jsx("div",{className:"inner",children:"load more"})})]})};R.propTypes={onCharSelected:S.func.isRequired};const J="/marvel-portal/assets/vision-DvadOGgD.png",re=()=>{const[s,r]=n.useState(null),a=t=>{r(t)};return e.jsxs(e.Fragment,{children:[e.jsx(x,{a:"1",children:e.jsx(V,{})}),e.jsxs("div",{className:"char__content",children:[e.jsx(x,{children:e.jsx(R,{onCharSelected:a})}),e.jsx(x,{children:e.jsx("div",{className:"char__info-wrapper",children:e.jsx(E,{charId:s})})})]}),e.jsx("img",{className:"bg-decoration",src:J,alt:"vision"})]})};export{re as default};
