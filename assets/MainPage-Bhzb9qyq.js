import{r as t,j as e,L as P}from"./index-DA4AbAyB.js";import{P as r,u as g}from"./MarvelService-D-f8CMb0.js";import{s as C}from"./setContent-k0CsiY4d.js";import{s as M,C as D,T as $,E as p}from"./ErrorBoundary-5eyPcqjB.js";import"./ErrorMessage-DXRTcyHz.js";const W="/marvel-portal/assets/mjolnir-g182l4Wh.png",F=()=>{const[s,a]=t.useState(null),{process:n,setProcess:c,getCharacter:d,clearError:o}=g();t.useEffect(()=>{m()},[]);const m=()=>{o();const h=Math.floor(Math.random()*400+1011e3);d(h).then(a).then(()=>c("confirmed")).catch(_=>{throw _.message})};return e.jsxs("div",{className:"randomchar",children:[C(n,R,s),e.jsxs("div",{className:"randomchar__static",children:[e.jsxs("p",{className:"randomchar__title",children:["Random character for today!",e.jsx("br",{}),"Do you want to get to know him better?"]}),e.jsx("p",{className:"randomchar__title",children:"Or choose another one"}),e.jsx("button",{className:"button button__main",onClick:m,children:e.jsx("div",{className:"inner",children:"try it"})}),e.jsx("img",{src:W,alt:"mjolnir",className:"randomchar__decoration"})]})]})},R=({thumbnail:s,name:a,description:n,homepage:c,wiki:d})=>{const o=`randomchar__img ${s.includes("image_not_available")?"randomchar__img_un":null}`;return e.jsxs("div",{className:"randomchar__block",children:[e.jsx("img",{src:s,alt:"Random character",className:o}),e.jsxs("div",{className:"randomchar__info",children:[e.jsx("p",{className:"randomchar__name",children:a}),e.jsx("p",{className:"randomchar__descr",children:n}),e.jsxs("div",{className:"randomchar__btns",children:[e.jsx("a",{href:c,target:"_blank",rel:"noreferrer",className:"button button__main",children:e.jsx("div",{className:"inner",children:"homepage"})}),e.jsx("a",{href:d,target:"_blank",rel:"noreferrer",className:"button button__secondary",children:e.jsx("div",{className:"inner",children:"Wiki"})})]})]})]})};R.propTypes={thumbnail:r.string.isRequired,name:r.string.isRequired,description:r.string.isRequired,homepage:r.string,wiki:r.string};const y=({charId:s})=>{const[a,n]=t.useState(null),{process:c,setProcess:d,getCharacter:o,clearError:m}=g();t.useEffect(()=>{h()},[s]);const h=()=>{s&&(m(),o(s).then(n).then(()=>d("confirmed")))};return e.jsx("div",{className:"char__info",children:C(c,k,a)})},k=({name:s,description:a,thumbnail:n,homepage:c,wiki:d,comics:o})=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"char__basics",children:[e.jsx("img",{className:n.includes("image_not_available")?"un":"",src:n,alt:s}),e.jsxs("div",{children:[e.jsx("div",{className:"char__info-name",children:s}),e.jsxs("div",{className:"char__btns",children:[e.jsx("a",{href:c,className:"button button__main",children:e.jsx("div",{className:"inner",children:"homepage"})}),e.jsx("a",{href:d,className:"button button__secondary",children:e.jsx("div",{className:"inner",children:"Wiki"})})]})]})]}),e.jsx("div",{className:"char__descr",children:a}),e.jsx("div",{className:"char__comics",children:"Comics:"}),e.jsxs("ul",{className:"char__comics-list",children:[o.length?null:"There are no comics for this character",o.map((m,h)=>e.jsx("li",{className:"char__comics-item",children:e.jsx(P,{to:`/comics/${m.resourceURI.match(/[^/]+$/)}`,children:m.name})},h))]})]});y.propTypes={charId:r.number};k.propTypes={name:r.string.isRequired,description:r.string,thumbnail:r.string.isRequired,homepage:r.string,wiki:r.string,comics:r.arrayOf(r.shape({name:r.string.isRequired,resourceURI:r.string.isRequired})).isRequired};const E=({onCharSelected:s})=>{const{process:a,setProcess:n,getAllCharacters:c,baseOffset:d}=g(),[o,m]=t.useState([]),[h,_]=t.useState(!1),[N,w]=t.useState(d),[S,q]=t.useState(!1);t.useEffect(()=>{v(N,!0)},[]);const v=(i,l)=>{_(!l),c(i).then(L).then(()=>n("confirmed")).catch(u=>{throw u.message})},L=i=>{let l=!1;i.length<9&&(l=!0),m(u=>[...u,...i]),_(!1),w(u=>u+9),q(l)},j=t.useRef([]),b=i=>{j.current.forEach(l=>l.classList.remove("char__item_selected")),j.current[i].classList.add("char__item_selected"),j.current[i].focus()},T=i=>(i=i.map(({id:l,thumbnail:u,name:O},f)=>e.jsx(D,{classNames:"char__item",timeout:400,children:e.jsxs("li",{tabIndex:0,ref:x=>j.current[f]=x,onClick:()=>{s(l),b(f)},onKeyDown:x=>{(x.key===" "||x.key==="Enter")&&(s(l),b(f))},className:"char__item",children:[e.jsx("img",{className:u.includes("image_not_available")?"un":"",src:u,alt:"character"}),e.jsx("div",{className:"char__name",children:O})]})},l)),e.jsx("ul",{className:"char__grid",children:e.jsx($,{component:null,children:i})})),I=t.useMemo(()=>M(a,()=>T(o),h),[a]);return e.jsxs("div",{className:"char__list",children:[I,e.jsx("button",{className:"button button__main button__long",onClick:()=>v(N),disabled:h,style:{display:S?"none":"block"},children:e.jsx("div",{className:"inner",children:"load more"})})]})};E.propTypes={onCharSelected:r.func.isRequired};const G="/marvel-portal/assets/vision-DvadOGgD.png",z=()=>{const[s,a]=t.useState(null),n=c=>{a(c)};return e.jsxs(e.Fragment,{children:[e.jsx(p,{children:e.jsx(F,{})}),e.jsxs("div",{className:"char__content",children:[e.jsx(p,{children:e.jsx(E,{onCharSelected:n})}),e.jsx(p,{children:e.jsx("div",{className:"char__info-wrapper",children:e.jsx(y,{charId:s})})})]}),e.jsx("img",{className:"bg-decoration",src:G,alt:"vision"})]})};export{z as default};
